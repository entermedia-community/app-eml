#set($views = $searcherManager.getList("$catalogid", "assettype/views"))
#set($searcher = $mediaarchive.getAssetSearcher())

#set ($isediting = ($context.getRequestParameter("edit") == "true") )
#if ($caneditasset && $isediting == true)
	#set ($detaileditsuffix = "")
<form method="post" action="$home$apphome/views/assets/save.html">
	<input type="hidden" name="catalogid" value="$searcher.catalogId"/>
	<input type="hidden" name="sourcepath" value="${asset.sourcepath}"/>
	<input type="hidden" name="save" value="true"/>	
	<input type="hidden" name="id" value="$asset.id"/>
#else
	#set ($detaileditsuffix = "?detailsreadonly=true")
#end
      
#foreach( $target in $views)
<h3>$target</h3>
$context.putPageValue("searcher", $searcher)  
#if($asset.assettype && $asset.assettype.length() > 0)
$context.putPageValue("view", "asset/assettype/$asset.assettype/$target.id")
#else

$context.putPageValue("view", "assettype/default/$target.id")

#end 
$context.putPageValue("data", $asset)
$pages.include("$apphome/components/xml/detaileditor.html$detaileditsuffix", $context)
#end
<br/>

#if ($isediting == true)
<p>
	<input type="submit" value="Save"/>
</p>

</form>
#end
#if( $caneditasset )
<ul class="embuttons">
<li>
	#if ($isediting)
		
	#else
		<a href="$home$apphome/views/assets/index.html?sourcepath=${asset.sourcepath}&edit=true"><span>Edit</span></a>
	#end
</li>	
</ul>
#end	
